<html>
  <head>
    <link href="css/index.css" rel="stylesheet" type="text/css" media="all" />
    <script src="js/processing.js"></script>
    <script src="js/processing.min.js"></script>
    <script>
      $(function () {
        sizing();
        $(window).resize(function() {
          sizing();
        });
      });
      function sizing(){
        $('#canvas01').attr({height:$('#wrapper').height()});
        $('#canvas01').attr({width:$('#wrapper').width()});
      };
    </script>

    <script>
      window.onload = function(){
        var canvas = document.getElementsByTagName('canvas')[0];
        var codeElm = document.getElementById('processing-code');
        var code = codeElm.textContent || codeElm.innerText;
        new Processing(canvas, code);
      };
    </script>
    <script id="processing-code" type="application/processing">
      void setup() {
        size(window.innerWidth, window.innerHeight);
        colorMode(HSB, 255);
        for (int i = 0; i < s.length; ++i) {
          s[i] = random(30, 100);
          x[i] = random(0, width);
          y[i] = random(0, height);
          c[i] = color(random(180, 300)%255, 255, 255,50);
          v[i][0] = s[i]*random(-2,2)/30;
          v[i][1] = s[i]*random(-2,2)/30;
        }
      }

      float[] s = new float[200];
      float[] x = new float[s.length];
      float[] y = new float[s.length];
      float[][] v = new float[s.length][2];
      color[] c = new color[s.length];

      void draw() {
        size(window.innerWidth, window.innerHeight);
        background(255);
        noStroke();
        for (int i = 0; i < s.length; ++i) {
          fill(c[i]);
          ellipse(x[i], y[i], s[i], s[i]);
        }
        update();
      }
      void update(){
        for (int i = 0; i < s.length; ++i) {
          x[i] += v[i][0];
          y[i] += v[i][1];
        }
        for (int i = 0; i < s.length; ++i) {
          if((x[i]-s[i]/2) > width && v[i][0] > 0){
            x[i] -= 4*width/3;
          }
          if((x[i]+s[i]/2) < 0 && v[i][0] < 0){
            x[i] += 4*width/3;
          }
          if((y[i]-s[i]/2) > height && v[i][1] > 0){
            y[i] -= 4*height/3;
          }
          if((y[i]+s[i]/2) < 0 && v[i][1] < 0){ 
            y[i] += 4*height/3;
          }
        }
      }
    </script>      
  </head>
  <body>
    <div id="wrapper">
      <canvas id="canvas01"></canvas>
    </div>
    <div id="container">
      <h1>Kory Background Test Page</h1>
      <p>
      background test page.
      </p>
    </div>
  </body>
</html>
